[gd_scene load_steps=16 format=3 uid="uid://ct1dtslkycmrk"]

[ext_resource type="Script" path="res://Scenes/Actors/Player.gd" id="1_fvvli"]
[ext_resource type="SpriteFrames" uid="uid://btoqcq38ikcrd" path="res://Assets/Sprites/Animations/Player_SpriteFrames.tres" id="1_infe4"]
[ext_resource type="Script" path="res://Scenes/Actors/state_machine.gd" id="3_mde7v"]
[ext_resource type="Script" path="res://Scenes/Actors/PlayerStates/idle.gd" id="4_33pue"]
[ext_resource type="Script" path="res://Scenes/Actors/PlayerStates/move.gd" id="5_dy7wr"]
[ext_resource type="Script" path="res://Scenes/Actors/PlayerStates/jump.gd" id="6_6jmq1"]
[ext_resource type="Script" path="res://Scenes/Actors/double_Jump.gd" id="7_7enfn"]
[ext_resource type="Script" path="res://Scenes/Actors/PlayerStates/fall.gd" id="7_buy52"]
[ext_resource type="Script" path="res://Scenes/Actors/attack.gd" id="8_ea2a6"]
[ext_resource type="Script" path="res://Scenes/Actors/attack_combo.gd" id="9_802ts"]
[ext_resource type="Script" path="res://Scenes/Actors/dodge.gd" id="11_x7wmm"]
[ext_resource type="Script" path="res://Scenes/Actors/block.gd" id="12_ed5sy"]
[ext_resource type="Script" path="res://Scenes/Actors/block_parry.gd" id="13_w6wcu"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fc428"]
size = Vector2(32, 33.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q82bc"]
size = Vector2(16, 30)

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_fvvli")

[node name="animations" type="AnimatedSprite2D" parent="."]
use_parent_material = true
sprite_frames = ExtResource("1_infe4")
animation = &"Damaged"
frame = 1
frame_progress = 0.694474
metadata/_edit_lock_ = true

[node name="SwordHit" type="Area2D" parent="animations"]
metadata/_edit_lock_ = true

[node name="Attack Area" type="CollisionShape2D" parent="animations/SwordHit"]
position = Vector2(16, -0.75)
shape = SubResource("RectangleShape2D_fc428")

[node name="PlayerShape" type="CollisionShape2D" parent="."]
position = Vector2(0, 1)
shape = SubResource("RectangleShape2D_q82bc")
metadata/_edit_lock_ = true

[node name="state_machine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("3_mde7v")
starting_state = NodePath("idle")

[node name="idle" type="Node" parent="state_machine" node_paths=PackedStringArray("fall_state", "jump_state", "move_state", "attack_State", "dodge_state", "block_state")]
script = ExtResource("4_33pue")
fall_state = NodePath("../fall")
jump_state = NodePath("../jump")
move_state = NodePath("../move")
attack_State = NodePath("../attack")
dodge_state = NodePath("../dodge")
block_state = NodePath("../block")
animation_name = "Idle"

[node name="move" type="Node" parent="state_machine" node_paths=PackedStringArray("fall_state", "idle_state", "jump_state", "attack_state", "dodge_state", "block_state")]
script = ExtResource("5_dy7wr")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
jump_state = NodePath("../jump")
attack_state = NodePath("../attack")
dodge_state = NodePath("../dodge")
block_state = NodePath("../block")
animation_name = "Move"

[node name="fall" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "move_state", "jump_state", "attack_state", "double_jump_state", "dodge_state")]
script = ExtResource("7_buy52")
idle_state = NodePath("../idle")
move_state = NodePath("../move")
jump_state = NodePath("../jump")
attack_state = NodePath("../attack")
double_jump_state = NodePath("../double_Jump")
dodge_state = NodePath("../dodge")
animation_name = "Fall"

[node name="jump" type="Node" parent="state_machine" node_paths=PackedStringArray("fall_state", "idle_state", "move_state", "double_jump_state", "dodge_state")]
script = ExtResource("6_6jmq1")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
move_state = NodePath("../move")
double_jump_state = NodePath("../double_Jump")
dodge_state = NodePath("../dodge")
jump_force = 300.0
animation_name = "Jump"

[node name="double_Jump" type="Node" parent="state_machine" node_paths=PackedStringArray("fall_state", "idle_state", "move_state", "dodge_state")]
script = ExtResource("7_7enfn")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
move_state = NodePath("../move")
dodge_state = NodePath("../dodge")
jump_force = 300.0

[node name="attack" type="Node" parent="state_machine" node_paths=PackedStringArray("move_state", "fall_state", "idle_state", "attack_combo_state")]
script = ExtResource("8_ea2a6")
move_state = NodePath("../move")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
attack_combo_state = NodePath("../attack_combo")
animation_name = "Attack"
move_speed = 100.0

[node name="attack_combo" type="Node" parent="state_machine" node_paths=PackedStringArray("move_state", "fall_state", "idle_state")]
script = ExtResource("9_802ts")
move_state = NodePath("../move")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
animation_name = "Attack_Combo"
move_speed = 100.0

[node name="dodge" type="Node" parent="state_machine" node_paths=PackedStringArray("fall_state", "idle_state", "move_state", "jump_state", "attack_state")]
script = ExtResource("11_x7wmm")
fall_state = NodePath("../fall")
idle_state = NodePath("../idle")
move_state = NodePath("../move")
jump_state = NodePath("../jump")
attack_state = NodePath("../attack")
animation_name = "Dodge"

[node name="block" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "fall_state", "block_parry_state")]
script = ExtResource("12_ed5sy")
idle_state = NodePath("../idle")
fall_state = NodePath("../fall")
block_parry_state = NodePath("../block_parry")
animation_name = "Block"

[node name="block_parry" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "fall_state")]
script = ExtResource("13_w6wcu")
idle_state = NodePath("../idle")
fall_state = NodePath("../fall")
animation_name = "Block_Parry"

[node name="Node" type="Node" parent="."]

[node name="damaged" type="Node" parent="Node"]

[node name="death_ground" type="Node" parent="Node"]

[node name="death_air" type="Node" parent="Node"]

[connection signal="area_entered" from="animations/SwordHit" to="state_machine/attack" method="_on_sword_hit_area_entered"]
[connection signal="area_entered" from="animations/SwordHit" to="state_machine/attack_combo" method="_on_sword_hit_area_entered"]
[connection signal="area_entered" from="animations/SwordHit" to="state_machine/block" method="_on_sword_hit_area_entered"]
